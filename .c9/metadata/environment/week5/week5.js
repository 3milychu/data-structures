{"changed":true,"filter":false,"title":"week5.js","tooltip":"/week5/week5.js","value":"var AWS = require('aws-sdk');\nAWS.config = new AWS.Config();\nAWS.config.accessKeyId = process.env.AWS_ID;\nAWS.config.secretAccessKey = process.env.AWS_KEY; \nAWS.config.region = \"us-east-1\";\nvar fs = require('fs');\nvar request = require('request');\n\nvar dynamodb = new AWS.DynamoDB();\n\nvar diaryEntries = [];\n\nclass DiaryEntry {\n  constructor(primaryKey, date, mental, emotional, physical, weather, primary_events, reoccuring_thoughts, dominant_temporality) {\n    this.pk = {};\n    this.pk.N = primaryKey.toString();\n    this.date = {}; \n    this.date.S = new Date(date).toDateString();\n    this.mental = {};\n    this.mental.N = mental;\n    this.emotional = {};\n    this.emotional.N = emotional;\n    this.physical = {};\n    this.physical.N = physical;\n    this.weather = {};\n    this.weather.S = weather;\n    this.primary_events = {};\n    this.primary_events.S = primary_events;\n    this.reoccuring_thoughts = {};\n    this.reoccuring_thoughts.S = reoccuring_thoughts;\n    this.dominant_temporality = {};\n    this.dominant_temporality.S = dominant_temporality;\n  }\n}\nvar csv = require(\"fast-csv\");\nvar stream = fs.createReadStream(\"data/data.csv\")\nvar diary = [];\ncsv\n    .fromStream(stream, {headers : true})\n    .on(\"data\", function(data){\n        var data = data;\n       diary.push(data);\n    })\n    .on(\"end\", function(){\n        console.log(\"done\");\n        for (var i=0;i<diary.length;i++){\n          var row = diary[i];\n          diaryEntries.push(new DiaryEntry(row['primaryKey'], row['date'], row['mental'], row['emotional'], row['physical'], \n          row['weather'], row['primary_events'], row['reoccuring_thoughts'], row['dominant_temporality']));\n        }\n        // console.log(diaryEntries);\n        for (i=0;i<diaryEntries.length;i++){\n          var params = {};\n          params.Item = diaryEntries[i]; \n          params.TableName = \"deardiary\";\n          console.log(params);\n        \n          dynamodb.putItem(params, function (err, data) {\n            if (err) console.log(err, err.stack); // an error occurred\n            else     console.log(data);           // successful response\n          });\n        }\n    });","undoManager":{"mark":-2,"position":0,"stack":[[{"start":{"row":3,"column":0},"end":{"row":9,"column":48},"action":"remove","lines":["<<<<<<< HEAD","// AKIAJLYYBWDWZWOLSWLQ","AWS.config.secretAccessKey = process.env.AWS_KEY; ","// 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","=======","AWS.config.secretAccessKey = process.env.AWS_KEY; ",">>>>>>> d2e1f3da97acd775c671f22f4748aba1b1ab2055"],"id":2},{"start":{"row":3,"column":0},"end":{"row":3,"column":50},"action":"insert","lines":["AWS.config.secretAccessKey = process.env.AWS_KEY; "]}]]},"ace":{"folds":[],"scrolltop":725.5,"scrollleft":0,"selection":{"start":{"row":4,"column":32},"end":{"row":4,"column":32},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":44,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1539321989196}